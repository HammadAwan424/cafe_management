<!DOCTYPE html>

<html lang="en">

<head>

<title>Edit Data</title>

<meta charset="UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>


<style>

/* --- GLOBAL & HTML/BODY SETUP --- */

html, body {

height: 100%;

margin: 0;

padding: 0;

overflow: hidden; /* Prevents scrollbars from fixed background */

background-color: transparent;

}

body {

font-family: Arial, sans-serif;

position: relative; /* Context for absolute positioning */

display: flex;

flex-direction: column; /* Stacks header, table, and button vertically */

align-items: center; /* Centers content horizontally */

justify-content: center; /* Centers content vertically */

/* Using min-height 100vh instead of height 100% can be more robust */

min-height: 100vh;

}



/* --- LOTTIE BACKGROUND --- */

#lottie-background {

position: fixed;

top: 0;

left: 0;

width: 100vw;

height: 100vh;

z-index: -1;

pointer-events: none;

opacity: 0.15; /* Reduced opacity for better visibility */

}

#lottie-background > svg {

width: 100% !important;

height: 100% !important;

display: block;

object-fit: cover;

}


/* --- CORNER HEADERS --- */

.header-left, .logo-container {

position: absolute;

z-index: 10;

top: 20px;

}

.header-left {

left: 20px;

}

.header-text {

font-size: 48px;

font-weight: 700;

color: #333;

text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);

letter-spacing: 1px;

margin: 0;

}

.logo-container {

right: 20px;

}

.logo-container img {

max-width: 150px;

height: auto;

opacity: 0.9;

}


/* --- MAIN DATA CONTAINER & TABLE LAYOUT --- */

.data-title {

font-size: 32px;

font-weight: 700;

color: #333;

letter-spacing: 1px;

margin-bottom: 25px; /* Space above the table */

z-index: 10;

}



.data-container {

/* Renamed container for clarity */

background-color: #ffffff;

padding: 20px;

border-radius: 12px;

box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);

z-index: 10;

/* Added display flex to center the table within the container */

display: flex;

justify-content: center;

}


/* --- TABLE STYLING --- */

table {

border: 2px solid #555;

border-collapse: collapse;

background-color: #f8f8f8;

}

th, td {

border: 1px solid #ccc;

padding: 10px 15px; /* Added horizontal padding */

text-align: center;

}

th {

background-color: #007bff;

color: white;

font-weight: bold;

text-transform: uppercase;

}


/* --- INPUT FIELD STYLING inside the table --- */

td input {

width: 100%;

padding: 8px;

border: 1px solid #ddd;

border-radius: 4px;

box-sizing: border-box; /* Crucial for keeping input padding/border inside the cell */

text-align: center;

}


/* --- BUTTON STYLING (Corrected) --- */

.save-button {

width: 250px; /* Consistent width */

padding: 12px;

background-color: #28a745; /* Green for SAVE action */

color: white;

border: none;

border-radius: 4px;

cursor: pointer;

font-size: 18px;

font-weight: 600;

margin-top: 20px; /* Space below the table */

z-index: 10;

}

.save-button:hover {

background-color: #218838;

}

</style>

</head>

<body>

<div id="lottie-background"></div>


<div class="header-left">

<div class="header-text">CONCORDIA 2</div>

</div>

<div class="logo-container">

<img src="./logo.png" alt="NUST Logo">

</div>



<div class="data-title">

EDIT PRODUCT DATA

</div>


<div class="central-form-group">

<form>

<div class="data-container">

<table>

<thead>

<tr>

<th>Product ID</th>

<th>Name</th>

<th>Cost</th>

</tr>

</thead>

<tbody>

<tr>

<td><input type="number" id="product-id" name="product-id" required min="1" step="1" placeholder="e.g., 10"></td>

<td><input type="text" id="productName" name="name" required placeholder="e.g., Biryani"></td>

<td><input type="number" id="productPrice" name="price" required min="10" step="10" placeholder="e.g., 270"></td>

</tr>

</tbody>

</table>

</div>


<button type="submit" class="save-button">

SAVE CHANGES

</button>

</form>

</div>



<script>

// Function to extract the product ID from the URL (e.g., ?id=1)

function getProductIdFromUrl() {

const urlParams = new URLSearchParams(window.location.search);

return parseInt(urlParams.get('id'));

}



function loadProductForEdit(productId) {

// 1. Load all data

const products = JSON.parse(localStorage.getItem('cafeProducts') || '[]');


// 2. Find the specific product object

const product = products.find(p => p.id === productId);



if (product) {

// 3. Populate the input fields with the current data

document.getElementById('product-id').value = product.id;

document.getElementById('productName').value = product.name;

document.getElementById('productPrice').value = product.price;


// Note: If you want to edit the group too, ensure you have an input for 'productGroup'

// For now, we only load ID, Name, and Price as defined in your table.

} else {

alert('Product not found for editing.');

window.location.href = 'data.html';

}

}



function handleSave(e) {

e.preventDefault(); // Stop form submission


// 1. Get the current, edited values from the inputs

const id = parseInt(document.getElementById('product-id').value);

const name = document.getElementById('productName').value;

const price = parseFloat(document.getElementById('productPrice').value);



// 2. Load the main array

let products = JSON.parse(localStorage.getItem('cafeProducts'));


// 3. Find the index of the product to update

const index = products.findIndex(p => p.id === id);



if (index !== -1) {

// 4. Update the object in the array

products[index].name = name;

products[index].price = price;

// products[index].group = /* Get group value if you added that input */;



// 5. Save the updated array back to Local Storage

localStorage.setItem('cafeProducts', JSON.stringify(products));

alert(`Product ID ${id} updated successfully!`);


// 6. Redirect back to the data page

window.location.href = 'data.html';

} else {

alert('Error: Product ID not found during save.');

}

}



document.addEventListener('DOMContentLoaded', () => {

// 1. Load Lottie Animation

lottie.loadAnimation({

container: document.getElementById('lottie-background'),

renderer: 'svg',

loop: true,

autoplay: true,

path: './settings.json'

});



// 2. Load product data for editing

const productIdToEdit = getProductIdFromUrl();

if (productIdToEdit) {

loadProductForEdit(productIdToEdit);

} else {

// Should not happen if redirected from data page

window.location.href = 'data.html';

}



// 3. Attach the save handler to the form

document.querySelector('form').addEventListener('submit', handleSave);

});

</script>

</body>

</html>